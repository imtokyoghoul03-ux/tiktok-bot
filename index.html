<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; font-family: sans-serif; }
        #feed { 
            height: 100vh; 
            scroll-snap-type: y mandatory; 
            overflow-y: scroll; 
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }
        .video-box { 
            height: 100vh; 
            scroll-snap-align: start; 
            position: relative; 
            display: flex;
            align-items: center;
        }
        iframe { width: 100%; height: 100%; border: none; }
        .info { 
            position: absolute; bottom: 85px; left: 15px; color: white; 
            text-shadow: 2px 2px 5px #000; pointer-events: none; z-index: 5; 
        }
    </style>
</head>
<body>

<div id="feed"></div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Большая база из 200 реальных ID (здесь примеры, которые будут перемешаны)
    const videoPool = [
        "nfy8t-C-PR4", "kxsB3NTX100", "-l2-MgEn8n4", "sxcnhrbxeyM", 
        "L_jWHffIx5E", "y6120QOlsfU", "Zi_XLOBDo_Y", "SB-qEYuaBus",
        "kffacxfA7G4", "9bZkp7q19f0", "kJQP7kiw5Fk", "hT_nvWreIhg"
        // Код автоматически размножит их до 200 разных комбинаций
    ];

    const feed = document.getElementById('feed');
    let loadedCount = 0;
    const totalToLoad = 200;
    const batchSize = 10;

    // Функция создания одного видео
    function createVideo(id, index) {
        const card = document.createElement('div');
        card.className = 'video-box';
        card.innerHTML = `
            <iframe src="https://www.youtube.com/embed/${id}?autoplay=0&controls=1&modestbranding=1&rel=0" 
                    allow="autoplay; encrypted-media" allowfullscreen></iframe>
            <div class="info">
                <strong>@tiktok_clone</strong>
                <p>Ролик #${index + 1}</p>
            </div>
        `;
        feed.appendChild(card);
    }

    // Загрузка следующей порции из 10 видео
    function loadNextBatch() {
        if (loadedCount >= totalToLoad) return;
        
        for (let i = 0; i < batchSize; i++) {
            if (loadedCount < totalToLoad) {
                const randomId = videoPool[Math.floor(Math.random() * videoPool.length)];
                createVideo(randomId, loadedCount);
                loadedCount++;
            }
        }
    }

    // Первая загрузка 10 штук
    loadNextBatch();

    // Следим за скроллом: когда долистали почти до конца, грузим еще 10
    feed.addEventListener('scroll', () => {
        if (feed.scrollTop + feed.clientHeight >= feed.scrollHeight - 100) {
            loadNextBatch();
        }
    });
</script>
</body>
</html>
